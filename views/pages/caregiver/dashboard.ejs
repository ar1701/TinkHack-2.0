<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Doctor Dashboard</title>
    <!-- <link rel="stylesheet" href="styles.css"> -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      :root {
        --primary: #136179cc;
        --primary-light: #eef2ff;
        --info: #36b9cc;
        --info-light: #e3f8fb;
        --success: #1cc88a;
        --success-light: #e6fff7;
        --warning: #f6c23e;
        --warning-light: #fff8e6;
        --danger: #e74a3b;
        --danger-light: #ffe6e4;
        --gray: #858796;
        --gray-light: #f8f9fc;
        --dark: #5a5c69;
        --sidebar-width: 250px;
        --transition-speed: 0.3s;
      }

      body {
        background-color: #4ca4becc;
        color: #5a5c69;
        overflow-x: hidden;
      }

      /* Background Elements */
      .background-container {
        position: fixed;
        width: 100%;
        height: 100%;
        overflow: hidden;
        z-index: -1;
      }
      .tab-content {
        display: none;
        padding: 20px;
        background: white;
        border-radius: var(--border-radius);
        box-shadow: var(--box-shadow);
        margin-bottom: 20px;
      }

      .tab-content.active {
        display: block;
      }
      .shape {
        position: absolute;
        opacity: 0.05;
        border-radius: 50%;
      }

      .shape1 {
        width: 500px;
        height: 500px;
        background: var(--primary);
        top: -150px;
        right: -100px;
      }

      .shape2 {
        width: 300px;
        height: 300px;
        background: var(--info);
        bottom: -100px;
        left: -50px;
      }

      .icons-container {
        position: absolute;
        width: 100%;
        height: 100%;
      }

      .icon {
        position: absolute;
        color: var(--gray);
        opacity: 0.05;
        font-size: 40px;
      }

      .icon:nth-child(1) {
        top: 20%;
        left: 10%;
      }
      .icon:nth-child(2) {
        top: 40%;
        left: 25%;
      }
      .icon:nth-child(3) {
        top: 60%;
        left: 15%;
      }
      .icon:nth-child(4) {
        top: 80%;
        left: 30%;
      }
      .icon:nth-child(5) {
        top: 15%;
        right: 20%;
      }
      .icon:nth-child(6) {
        top: 35%;
        right: 10%;
      }
      .icon:nth-child(7) {
        top: 55%;
        right: 25%;
      }
      .icon:nth-child(8) {
        top: 75%;
        right: 15%;
      }

      /* Sidebar */
      .sidebar {
        position: fixed;
        left: 0;
        top: 0;
        width: var(--sidebar-width);
        height: 100%;
        background: #167997cc;
        box-shadow: 0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.15);
        z-index: 100;
        transition: all var(--transition-speed);
        overflow-y: auto;
      }

      .sidebar h2 {
        padding: 1.5rem;
        color: var(--primary);
        font-size: 1.2rem;
        color: white;
        border-bottom: 1px solid rgba(0, 0, 0, 0.1);
      }

      .sidebar ul {
        list-style: none;
        padding: 1rem 0;
      }

      .sidebar ul li {
        position: relative;
      }

      .sidebar ul li a {
        display: flex;
        align-items: center;
        color: var(--gray);
        padding: 0.8rem 1.5rem;
        text-decoration: none;
        transition: all 0.2s;
        color: white;
      }

      .sidebar ul li a i {
        margin-right: 0.8rem;
        min-width: 20px;
        text-align: center;
      }

      .sidebar ul li.active a,
      .sidebar ul li a:hover {
        color: var(--primary);
        background: var(--primary-light);
        border-left: 4px solid var(--primary);
      }

      .sidebar .logout {
        position: absolute;
        bottom: 0;
        width: 100%;

        border-top: 1px solid rgba(0, 0, 0, 0.1);
      }

      .sidebar .logout a {
        color: var(--danger);
        color: white;
      }

      .sidebar .logout a:hover {
        background: var(--danger-light);
        border-left: 4px solid var(--danger);
      }

      /* Menu Toggle */
      .menu-toggle {
        position: fixed;
        top: 15px;
        left: 15px;
        z-index: 200;
        background: var(--primary);
        color: white;
        width: 40px;
        height: 40px;
        border-radius: 5px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        display: none;
      }

      /* Main Content */
      .main-content {
        margin-left: var(--sidebar-width);
        padding: 1.5rem;
        transition: all var(--transition-speed);
      }

      /* Header */
      .header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1.5rem;
      }

      .header h1 {
        font-size: 1.7rem;
        color: var(--dark);
        font-weight: 500;
      }

      .user-profile {
        display: flex;
        align-items: center;
      }

      .profile-image {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        object-fit: cover;
        margin-right: 1rem;
      }

      .notification-bell {
        position: relative;
        margin-left: 1rem;
        cursor: pointer;
      }

      .notification-count {
        position: absolute;
        top: -8px;
        right: -8px;
        background: var(--danger);
        color: white;
        font-size: 0.7rem;
        font-weight: bold;
        width: 18px;
        height: 18px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      /* Notifications Popup */
      .notifications-popup {
        position: absolute;
        top: 60px;
        right: 20px;
        width: 350px;
        background: white;
        border-radius: 8px;
        box-shadow: 0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.15);
        z-index: 101;
        display: none;
      }

      .notifications-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1rem;
        border-bottom: 1px solid rgba(0, 0, 0, 0.1);
      }

      .notifications-header h3 {
        font-size: 1rem;
        color: var(--dark);
      }

      .mark-all-read {
        background: none;
        border: none;
        color: var(--primary);
        cursor: pointer;
        font-size: 0.8rem;
      }

      .notifications-list {
        max-height: 350px;
        overflow-y: auto;
      }

      .notification-item {
        display: flex;
        padding: 0.8rem 1rem;
        border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        transition: background 0.2s;
      }

      .notification-item:hover {
        background: var(--gray-light);
      }

      .notification-item.unread {
        background: var(--primary-light);
      }

      .notification-icon {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        margin-right: 0.8rem;
      }

      .notification-content {
        flex: 1;
      }

      .notification-title {
        font-weight: 600;
        font-size: 0.9rem;
        color: var(--dark);
      }

      .notification-message {
        font-size: 0.8rem;
        color: var(--gray);
        margin: 0.2rem 0;
      }

      .notification-time {
        font-size: 0.7rem;
        color: var(--gray);
      }

      .notifications-footer {
        padding: 0.8rem;
        text-align: center;
        border-top: 1px solid rgba(0, 0, 0, 0.1);
      }

      .notifications-footer a {
        color: var(--primary);
        text-decoration: none;
        font-size: 0.9rem;
      }

      /* Dashboard Sections */
      .dashboard-section {
        display: none;
      }

      .dashboard-section.active {
        display: block;
      }

      .section-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1.5rem;
      }

      .section-header h2 {
        font-size: 1.4rem;
        color: var(--dark);
        font-weight: 500;
      }

      .date-select {
        padding: 0.5rem 1rem;
        border-radius: 5px;
        border: 1px solid rgba(0, 0, 0, 0.1);
        background-color: white;
        color: var(--dark);
        cursor: pointer;
      }

      /* Summary Cards */
      .summary-container {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 1.5rem;
        margin-bottom: 1.5rem;
      }

      .summary-card {
        background: white;
        border-radius: 8px;
        padding: 1.5rem;
        display: flex;
        align-items: center;
        box-shadow: 0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.1);
        transition: transform 0.2s;
      }

      .summary-card:hover {
        transform: translateY(-5px);
      }

      .summary-icon {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 1.3rem;
        margin-right: 1rem;
      }

      .summary-details {
        flex: 1;
      }

      .summary-details h3 {
        font-size: 0.9rem;
        color: var(--gray);
        margin-bottom: 0.3rem;
      }

      .summary-count {
        font-size: 1.8rem;
        font-weight: 600;
        color: var(--dark);
        margin-bottom: 0.3rem;
      }

      .summary-status {
        font-size: 0.8rem;
        color: var(--gray);
      }

      .summary-status .up {
        color: var(--success);
      }

      .summary-status .down {
        color: var(--danger);
      }

      /* Card General Styles */
      .card-container {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 1.5rem;
        margin-bottom: 1.5rem;
      }

      .card {
        background: white;
        border-radius: 8px;
        box-shadow: 0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.1);
        overflow: hidden;
      }

      .card-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1rem 1.5rem;
        border-bottom: 1px solid rgba(0, 0, 0, 0.1);
      }

      .card-header .d-flex {
        display: flex;
        align-items: center;
      }

      .card-icon {
        width: 35px;
        height: 35px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 1rem;
        margin-right: 0.8rem;
      }

      .card-header h3 {
        font-size: 1.1rem;
        color: var(--dark);
        font-weight: 500;
      }

      .view-all {
        color: var(--primary);
        text-decoration: none;
        font-size: 0.8rem;
      }

      .card-body {
        padding: 1.5rem;
      }

      /* Appointments Card */
      .appointment-item {
        display: flex;
        margin-bottom: 1.2rem;
        padding-bottom: 1.2rem;
        border-bottom: 1px solid rgba(0, 0, 0, 0.05);
      }

      .appointment-item:last-child {
        margin-bottom: 0;
        padding-bottom: 0;
        border-bottom: none;
      }

      .appointment-time {
        min-width: 75px;
        font-weight: 600;
        color: var(--primary);
        font-size: 0.9rem;
      }

      .appointment-details {
        flex: 1;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .patient-info {
        display: flex;
        align-items: center;
      }

      .patient-image {
        width: 35px;
        height: 35px;
        border-radius: 50%;
        object-fit: cover;
        margin-right: 0.8rem;
      }

      .patient-name {
        font-weight: 600;
        font-size: 0.95rem;
        color: var(--dark);
      }

      .appointment-type {
        font-size: 0.8rem;
        color: var(--gray);
        display: flex;
        align-items: center;
      }

      .tag {
        display: inline-block;
        padding: 0.2rem 0.5rem;
        font-size: 0.7rem;
        border-radius: 3px;
        margin-left: 0.5rem;
      }

      .tag.urgent {
        background: var(--danger-light);
        color: var(--danger);
      }

      .appointment-actions {
        display: flex;
      }

      .btn-action {
        width: 32px;
        height: 32px;
        border-radius: 5px;
        display: flex;
        align-items: center;
        justify-content: center;
        border: none;
        cursor: pointer;
        margin-left: 0.5rem;
        transition: all 0.2s;
      }

      .btn-accept {
        background: var(--success-light);
        color: var(--success);
      }

      .btn-accept:hover {
        background: var(--success);
        color: white;
      }

      .btn-cancel {
        background: var(--danger-light);
        color: var(--danger);
      }

      .btn-cancel:hover {
        background: var(--danger);
        color: white;
      }

      /* Patient List */
      .patient-list-item {
        display: flex;
        align-items: center;
        padding: 0.8rem 0;
        border-bottom: 1px solid rgba(0, 0, 0, 0.05);
      }

      .patient-list-item:last-child {
        border-bottom: none;
      }

      .patient-list-details {
        flex: 1;
        margin-left: 0.8rem;
      }

      .patient-list-name {
        font-weight: 600;
        font-size: 0.95rem;
        color: var(--dark);
      }

      .patient-list-info {
        display: flex;
        font-size: 0.8rem;
        color: var(--gray);
      }

      .patient-list-info span {
        margin-right: 1rem;
      }

      .btn-view {
        padding: 0.3rem 0.8rem;
        background: var(--primary-light);
        color: var(--primary);
        border-radius: 5px;
        text-decoration: none;
        font-size: 0.8rem;
        transition: all 0.2s;
      }

      .btn-view:hover {
        background: var(--primary);
        color: white;
      }

      /* Timeline Card */
      .timeline-card {
        margin-bottom: 1.5rem;
      }

      .timeline {
        position: relative;
        padding-left: 2rem;
      }

      .timeline::before {
        content: "";
        position: absolute;
        left: 9px;
        top: 0;
        height: 100%;
        width: 2px;
        background: rgba(0, 0, 0, 0.1);
      }

      .timeline-item {
        position: relative;
        padding-bottom: 1.5rem;
      }

      .timeline-item:last-child {
        padding-bottom: 0;
      }

      .timeline-icon {
        position: absolute;
        left: -2rem;
        top: 0;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 0.6rem;
      }

      .timeline-content {
        background: var(--gray-light);
        border-radius: 8px;
        padding: 1rem;
      }

      .timeline-time {
        font-size: 0.8rem;
        color: var(--gray);
        margin-bottom: 0.2rem;
      }

      .timeline-title {
        font-weight: 600;
        font-size: 0.95rem;
        color: var(--dark);
        margin-bottom: 0.2rem;
      }

      .timeline-description {
        font-size: 0.85rem;
        color: var(--gray);
      }

      /* Background Colors */
      .bg-primary {
        background-color: var(--primary);
      }
      .bg-primary-light {
        background-color: var(--primary-light);
      }
      .bg-info {
        background-color: var(--info);
      }
      .bg-info-light {
        background-color: var(--info-light);
      }
      .bg-success {
        background-color: var(--success);
      }
      .bg-success-light {
        background-color: var(--success-light);
      }
      .bg-warning {
        background-color: var(--warning);
      }
      .bg-warning-light {
        background-color: var(--warning-light);
      }
      .bg-danger {
        background-color: var(--danger);
      }
      .bg-danger-light {
        background-color: var(--danger-light);
      }

      /* Helper Classes */
      .d-flex {
        display: flex;
        align-items: center;
      }

      /* Responsive Styles */
      @media (max-width: 992px) {
        .summary-container {
          grid-template-columns: repeat(2, 1fr);
        }

        .card-container {
          grid-template-columns: 1fr;
        }
      }

      @media (max-width: 768px) {
        .sidebar {
          transform: translateX(-100%);
        }

        .sidebar.active {
          transform: translateX(0);
        }

        .main-content {
          margin-left: 0;
        }

        .menu-toggle {
          display: flex;
        }

        .header {
          flex-direction: column;
          align-items: flex-start;
        }

        .user-profile {
          margin-top: 1rem;
        }

        .summary-container {
          grid-template-columns: 1fr;
        }
      }

      @media (max-width: 480px) {
        .header h1 {
          font-size: 1.3rem;
        }

        .notifications-popup {
          width: 100%;
          right: 0;
        }
      }

      /* JS Related Classes (for toggle functionality) */
      .sidebar.active {
        transform: translateX(0);
      }

      .notifications-popup.show {
        display: block;
      }
    </style>
  </head>
  <body>
    <!-- Background Elements -->
    <div class="background-container">
      <div class="shape shape1"></div>
      <div class="shape shape2"></div>
      <div class="icons-container">
        <i class="icon fas fa-heartbeat"></i>
        <i class="icon fas fa-pills"></i>
        <i class="icon fas fa-stethoscope"></i>
        <i class="icon fas fa-user-md"></i>
        <i class="icon fas fa-hospital"></i>
        <i class="icon fas fa-notes-medical"></i>
        <i class="icon fas fa-syringe"></i>
        <i class="icon fas fa-ambulance"></i>
      </div>
    </div>

    <!-- Menu Toggle for Mobile -->
    <div class="menu-toggle" id="menuToggle">
      <i class="fas fa-bars"></i>
    </div>

    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
      <h2><i class="fas fa-user-md"></i> Caregiver Portal</h2>
      <ul>
        <li class="active">
          <a href="/caregiver/dashboard"
            ><i class="fas fa-home"></i> Dashboard</a
          >
        </li>
        <li>
          <a href="/caregiver/profile"
            ><i class="fas fa-user-md"></i> Profile</a
          >
        </li>
        <li>
          <a href="/caregiver/patient-requests"
            ><i class="fas fa-bell"></i> Patient Requests</a
          >
        </li>
        <li>
          <a href="/caregiver/chat"
            ><i class="fas fa-comments"></i> Patient Chat</a
          >
        </li>
        <li>
          <a href="/caregiver/appointments"
            ><i class="fas fa-calendar-check"></i> Appointments</a
          >
        </li>
      </ul>
      <ul class="logout">
        <li>
          <a href="/logout"><i class="fas fa-sign-out-alt"></i> Logout</a>
        </li>
      </ul>
    </div>

    <!-- Main Content -->
    <div class="main-content">
      <div class="header">
        <h1>Welcome back, Dr. <%= user.fullName %></h1>
        <div class="user-profile">
          <img
            src="<%= caregiver && caregiver.profileImage ? `/uploads/profile/${caregiver.profileImage}` : '/images/default-doctor.jpg' %>"
            alt="Doctor Profile"
            class="profile-image"
          />
          <div class="notification-bell" id="notificationBell">
            <i class="fas fa-bell"></i>
            <span class="notification-count">5</span>
          </div>
        </div>
      </div>

      <!-- Notifications Popup -->
      <div class="notifications-popup" id="notificationsPopup">
        <div class="notifications-header">
          <h3>Notifications</h3>
          <button class="mark-all-read">Mark all as read</button>
        </div>
        <div class="notifications-list">
          <div class="notification-item unread">
            <div class="notification-icon bg-primary">
              <i class="fas fa-calendar-alt"></i>
            </div>
            <div class="notification-content">
              <div class="notification-title">New Appointment Request</div>
              <div class="notification-message">
                John Doe requested an urgent appointment.
              </div>
              <div class="notification-time">10 minutes ago</div>
            </div>
          </div>
          <div class="notification-item unread">
            <div class="notification-icon bg-info">
              <i class="fas fa-file-medical"></i>
            </div>
            <div class="notification-content">
              <div class="notification-title">New Lab Results</div>
              <div class="notification-message">
                Lab results for Maria Garcia are now available.
              </div>
              <div class="notification-time">1 hour ago</div>
            </div>
          </div>
          <div class="notification-item unread">
            <div class="notification-icon bg-success">
              <i class="fas fa-comments"></i>
            </div>
            <div class="notification-content">
              <div class="notification-title">New Message</div>
              <div class="notification-message">
                Patient Robert Smith has sent you a message.
              </div>
              <div class="notification-time">3 hours ago</div>
            </div>
          </div>
          <div class="notification-item">
            <div class="notification-icon bg-warning">
              <i class="fas fa-prescription"></i>
            </div>
            <div class="notification-content">
              <div class="notification-title">Prescription Refill</div>
              <div class="notification-message">
                Emily Johnson requested a prescription refill.
              </div>
              <div class="notification-time">Yesterday</div>
            </div>
          </div>
          <div class="notification-item">
            <div class="notification-icon bg-danger">
              <i class="fas fa-exclamation-circle"></i>
            </div>
            <div class="notification-content">
              <div class="notification-title">Urgent Follow-up</div>
              <div class="notification-message">
                Urgent follow-up required for patient Michael Brown.
              </div>
              <div class="notification-time">Yesterday</div>
            </div>
          </div>
        </div>
        <div class="notifications-footer">
          <a href="notifications.html">View all notifications</a>
        </div>
      </div>

      <!-- Dashboard Overview Section -->
      <div class="dashboard-section active" id="dashboard">
        <div class="section-header">
          <h2>Dashboard Overview</h2>
          <div class="date-filter">
            <select id="dateFilter" class="date-select">
              <option value="today">Today</option>
              <option value="week" selected>This Week</option>
              <option value="month">This Month</option>
            </select>
          </div>
        </div>

        <!-- Summary Cards -->
        <div class="summary-container">
          <div class="summary-card bg-primary-light">
            <div class="summary-icon bg-primary">
              <i class="fas fa-calendar-check"></i>
            </div>
            <div class="summary-details">
              <h3>Appointments</h3>
              <div class="summary-count">12</div>
              <div class="summary-status">
                <span class="up"><i class="fas fa-arrow-up"></i> 8%</span> vs
                last week
              </div>
            </div>
          </div>

          <div class="summary-card bg-info-light">
            <div class="summary-icon bg-info">
              <i class="fas fa-user-injured"></i>
            </div>
            <div class="summary-details">
              <h3>New Patients</h3>
              <div class="summary-count">7</div>
              <div class="summary-status">
                <span class="up"><i class="fas fa-arrow-up"></i> 12%</span> vs
                last week
              </div>
            </div>
          </div>

          <div class="summary-card bg-success-light">
            <div class="summary-icon bg-success">
              <i class="fas fa-procedures"></i>
            </div>
            <div class="summary-details">
              <h3>Procedures</h3>
              <div class="summary-count">5</div>
              <div class="summary-status">
                <span class="down"><i class="fas fa-arrow-down"></i> 3%</span>
                vs last week
              </div>
            </div>
          </div>

          <div class="summary-card bg-warning-light">
            <div class="summary-icon bg-warning">
              <i class="fas fa-clipboard-list"></i>
            </div>
            <div class="summary-details">
              <h3>Pending Reports</h3>
              <div class="summary-count">9</div>
              <div class="summary-status">
                <span class="up"><i class="fas fa-arrow-up"></i> 15%</span> vs
                last week
              </div>
            </div>
          </div>
        </div>

        <!-- Main Dashboard Content -->
        <div class="card-container">
          <!-- Upcoming Appointments Card -->
          <div class="card dashboard-card">
            <div class="card-header">
              <div class="d-flex">
                <div class="card-icon bg-primary">
                  <i class="fas fa-calendar-alt"></i>
                </div>
                <div>
                  <h3>Today's Appointments</h3>
                </div>
              </div>
              <a href="appointments.html" class="view-all">View All</a>
            </div>
            <div class="card-body">
              <div class="appointment-item">
                <div class="appointment-time">09:00 AM</div>
                <div class="appointment-details">
                  <div class="patient-info">
                    <img src="./Pat.jpeg" alt="Patient" class="patient-image" />
                    <div>
                      <div class="patient-name">John Doe</div>
                      <div class="appointment-type">Regular Checkup</div>
                    </div>
                  </div>
                  <div class="appointment-actions">
                    <button class="btn-action btn-accept">
                      <i class="fas fa-video"></i>
                    </button>
                    <button class="btn-action btn-cancel">
                      <i class="fas fa-times"></i>
                    </button>
                  </div>
                </div>
              </div>

              <div class="appointment-item">
                <div class="appointment-time">10:30 AM</div>
                <div class="appointment-details">
                  <div class="patient-info">
                    <img
                      src="./Pat2.jpeg"
                      alt="Patient"
                      class="patient-image"
                    />
                    <div>
                      <div class="patient-name">Maria Garcia</div>
                      <div class="appointment-type">Follow-up</div>
                    </div>
                  </div>
                  <div class="appointment-actions">
                    <button class="btn-action btn-accept">
                      <i class="fas fa-video"></i>
                    </button>
                    <button class="btn-action btn-cancel">
                      <i class="fas fa-times"></i>
                    </button>
                  </div>
                </div>
              </div>

              <div class="appointment-item">
                <div class="appointment-time">01:15 PM</div>
                <div class="appointment-details">
                  <div class="patient-info">
                    <img src="./Pat.jpeg" alt="Patient" class="patient-image" />
                    <div>
                      <div class="patient-name">Robert Smith</div>
                      <div class="appointment-type">
                        Consultation <span class="tag urgent">Urgent</span>
                      </div>
                    </div>
                  </div>
                  <div class="appointment-actions">
                    <button class="btn-action btn-accept">
                      <i class="fas fa-video"></i>
                    </button>
                    <button class="btn-action btn-cancel">
                      <i class="fas fa-times"></i>
                    </button>
                  </div>
                </div>
              </div>

              <div class="appointment-item">
                <div class="appointment-time">03:45 PM</div>
                <div class="appointment-details">
                  <div class="patient-info">
                    <img
                      src="./Pat2.jpeg"
                      alt="Patient"
                      class="patient-image"
                    />
                    <div>
                      <div class="patient-name">Emily Johnson</div>
                      <div class="appointment-type">Prescription Review</div>
                    </div>
                  </div>
                  <div class="appointment-actions">
                    <button class="btn-action btn-accept">
                      <i class="fas fa-video"></i>
                    </button>
                    <button class="btn-action btn-cancel">
                      <i class="fas fa-times"></i>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Recent Patients Card -->
          <div class="card dashboard-card">
            <div class="card-header">
              <div class="d-flex">
                <div class="card-icon bg-info">
                  <i class="fas fa-user-injured"></i>
                </div>
                <div>
                  <h3>My Patients</h3>
                </div>
              </div>
              <a href="/caregiver/patients" class="view-all">View All</a>
            </div>
            <div class="card-body">
              <div class="patient-list">
                <% if (caregiver.patients && caregiver.patients.length > 0) { %>
                <% caregiver.patients.forEach(function(patientId) { %>
                <div class="patient-list-item">
                  <img
                    src="/images/default-user.jpg"
                    alt="Patient"
                    class="patient-image"
                  />
                  <div class="patient-list-details">
                    <div class="patient-list-name">
                      Patient #<%= patientId %>
                    </div>
                    <div class="patient-list-info">
                      <span class="patient-condition">Connected</span>
                    </div>
                  </div>
                  <div class="d-flex">
                    <a
                      href="/caregiver/patients/<%= patientId %>"
                      class="btn-view me-2"
                      >View</a
                    >
                    <a
                      href="/caregiver/chat/<%= patientId %>"
                      class="btn-view"
                      style="background-color: #28a745"
                    >
                      <i class="fas fa-comments"></i>
                    </a>
                  </div>
                </div>
                <% }); %> <% } else { %>
                <div class="text-center py-4">
                  <i class="fas fa-user-injured fa-3x text-muted mb-3"></i>
                  <p>You have no patients yet</p>
                  <p class="text-muted">
                    Patient requests will appear when patients connect with you
                  </p>
                </div>
                <% } %>
              </div>
            </div>
          </div>
        </div>

        <!-- Activity Timeline -->
        <div class="card timeline-card">
          <div class="card-header">
            <div class="d-flex">
              <div class="card-icon bg-success">
                <i class="fas fa-chart-line"></i>
              </div>
              <div>
                <h3>Recent Activity</h3>
              </div>
            </div>
          </div>
          <div class="card-body">
            <div class="timeline">
              <div class="timeline-item">
                <div class="timeline-icon bg-primary">
                  <i class="fas fa-file-prescription"></i>
                </div>
                <div class="timeline-content">
                  <div class="timeline-time">10:45 AM</div>
                  <div class="timeline-title">Prescription Created</div>
                  <div class="timeline-description">
                    You created a prescription for John Doe
                  </div>
                </div>
              </div>

              <div class="timeline-item">
                <div class="timeline-icon bg-info">
                  <i class="fas fa-file-medical-alt"></i>
                </div>
                <div class="timeline-content">
                  <div class="timeline-time">09:30 AM</div>
                  <div class="timeline-title">Medical Record Updated</div>
                  <div class="timeline-description">
                    You updated the medical record for Maria Garcia
                  </div>
                </div>
              </div>

              <div class="timeline-item">
                <div class="timeline-icon bg-success">
                  <i class="fas fa-calendar-check"></i>
                </div>
                <div class="timeline-content">
                  <div class="timeline-time">Yesterday, 04:15 PM</div>
                  <div class="timeline-title">Appointment Completed</div>
                  <div class="timeline-description">
                    Completed a follow-up appointment with Robert Smith
                  </div>
                </div>
              </div>

              <div class="timeline-item">
                <div class="timeline-icon bg-warning">
                  <i class="fas fa-clipboard-list"></i>
                </div>
                <div class="timeline-content">
                  <div class="timeline-time">Yesterday, 02:00 PM</div>
                  <div class="timeline-title">Lab Result Reviewed</div>
                  <div class="timeline-description">
                    You reviewed lab results for Emily Johnson
                  </div>
                </div>
              </div>

              <div class="timeline-item">
                <div class="timeline-icon bg-danger">
                  <i class="fas fa-user-plus"></i>
                </div>
                <div class="timeline-content">
                  <div class="timeline-time">Yesterday, 10:30 AM</div>
                  <div class="timeline-title">New Patient Registration</div>
                  <div class="timeline-description">
                    Michael Brown registered as a new patient
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- <script src="script.js"></script> -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Toggle sidebar on mobile
        const menuToggle = document.getElementById("menuToggle");
        const sidebar = document.getElementById("sidebar");

        if (menuToggle && sidebar) {
          menuToggle.addEventListener("click", function () {
            sidebar.classList.toggle("active");
          });
        }

        // Close sidebar when clicking outside on mobile
        document.addEventListener("click", function (e) {
          if (
            sidebar &&
            sidebar.classList.contains("active") &&
            !sidebar.contains(e.target) &&
            e.target !== menuToggle
          ) {
            sidebar.classList.remove("active");
          }
        });

        // Export button functionality for patients data
        document
          .getElementById("exportBtn")
          .addEventListener("click", function () {
            const rows = document.querySelectorAll(".patients-table tbody tr");
            let csvContent = "data:text/csv;charset=utf-8,";

            // Add headers
            const headers = [];
            document
              .querySelectorAll(".patients-table thead th")
              .forEach((header) => {
                headers.push(header.innerText.trim());
              });
            csvContent += headers.join(",") + "\n";

            // Add rows
            rows.forEach((row) => {
              const rowData = [];
              row.querySelectorAll("td").forEach((cell) => {
                rowData.push(cell.innerText.trim());
              });
              csvContent += rowData.join(",") + "\n";
            });

            // Create a downloadable file
            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", "patients_data.csv");
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
          });

        // View Record Modal
        const viewButtons = document.querySelectorAll(".action-btn.view");
        const viewRecordModal = document.getElementById("viewRecordModal");
        const closeViewModalBtn = document.getElementById("closeViewModal");
        const closeViewModalBtnFooter =
          document.getElementById("closeViewModalBtn");

        viewButtons.forEach((button) => {
          button.addEventListener("click", () => {
            viewRecordModal.classList.add("active");
          });
        });

        closeViewModalBtn.addEventListener("click", () => {
          viewRecordModal.classList.remove("active");
        });

        closeViewModalBtnFooter.addEventListener("click", () => {
          viewRecordModal.classList.remove("active");
        });

        // Edit Record Modal
        const editButtons = document.querySelectorAll(".action-btn.edit");
        const editRecordModal = document.getElementById("editRecordModal");
        const closeEditModalBtn = document.getElementById("closeEditModal");
        const cancelEditModalBtn = document.getElementById("cancelEditModal");
        const saveEditRecordBtn = document.getElementById("saveEditRecord");

        editButtons.forEach((button) => {
          button.addEventListener("click", () => {
            editRecordModal.classList.add("active");
          });
        });

        closeEditModalBtn.addEventListener("click", () => {
          editRecordModal.classList.remove("active");
        });

        cancelEditModalBtn.addEventListener("click", () => {
          editRecordModal.classList.remove("active");
        });

        saveEditRecordBtn.addEventListener("click", () => {
          alert("Record updated successfully!");
          editRecordModal.classList.remove("active");
        });

        // Share Button
        document.querySelectorAll(".action-btn.share").forEach((button) => {
          button.addEventListener("click", () => {
            const recordLink = "https://example.com/record/123"; // Replace with actual link
            navigator.clipboard
              .writeText(recordLink)
              .then(() => {
                alert("Record link copied to clipboard: " + recordLink);
              })
              .catch(() => {
                alert("Failed to copy link to clipboard.");
              });
          });
        });

        // Add new certification
        document
          .querySelector(".add-certification button")
          .addEventListener("click", function () {
            const certificationsList = document.querySelector(
              ".certifications-list"
            );
            const newCertification = document.createElement("div");
            newCertification.classList.add("certification-item");
            newCertification.innerHTML = `
            <div class="certification-icon bg-primary">
                <i class="fas fa-award"></i>
            </div>
            <div class="certification-details">
                <div class="certification-name">New Certification</div>
                <div class="certification-info">Details about the new certification</div>
            </div>
            <div class="certification-status valid">
                <i class="fas fa-check-circle"></i> Valid
            </div>
            <div class="certification-actions">
                <button class="btn-icon edit-btn"><i class="fas fa-edit"></i></button>
                <button class="btn-icon delete-btn"><i class="fas fa-trash"></i></button>
            </div>
        `;
            certificationsList.appendChild(newCertification);
          });

        // Tab navigation and smooth scrolling
        function scrollToSection(sectionId) {
          const section = document.getElementById(sectionId);
          if (section) {
            section.scrollIntoView({ behavior: "smooth" });
          }
        }

        document.querySelectorAll(".tab-button").forEach((button) => {
          button.addEventListener("click", function () {
            // Remove active class from all buttons
            document.querySelectorAll(".tab-button").forEach((btn) => {
              btn.classList.remove("active");
            });

            // Add active class to clicked button
            this.classList.add("active");

            // Scroll to the corresponding section
            const tab = this.getAttribute("data-tab");
            scrollToSection(`${tab}-content`);
          });
        });

        // Export button functionality for appointments
        document
          .getElementById("exportBtn")
          .addEventListener("click", function () {
            // Get the appointment data
            const appointments = [];
            document.querySelectorAll(".appointment-row").forEach((row) => {
              const appointment = {
                time: row.querySelector(".time-display").textContent.trim(),
                patient: row.querySelector(".patient-name").textContent.trim(),
                type: row.querySelector(".appointment-type").textContent.trim(),
                status: row.querySelector(".status-badge").textContent.trim(),
              };
              appointments.push(appointment);
            });

            // Convert data to CSV format
            const csvContent =
              "data:text/csv;charset=utf-8," +
              "Time,Patient,Type,Status\n" + // CSV header
              appointments
                .map(
                  (appointment) =>
                    `${appointment.time},${appointment.patient},${appointment.type},${appointment.status}`
                )
                .join("\n");

            // Create a downloadable link
            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", "appointments.csv");
            document.body.appendChild(link);

            // Trigger the download
            link.click();

            // Clean up
            document.body.removeChild(link);
          });

        // Notifications popup
        const notificationBell = document.getElementById("notificationBell");
        const notificationsPopup =
          document.getElementById("notificationsPopup");

        if (notificationBell && notificationsPopup) {
          notificationBell.addEventListener("click", function (e) {
            e.stopPropagation();
            notificationsPopup.classList.toggle("show");
          });

          // Close notifications when clicking outside
          document.addEventListener("click", function (e) {
            if (
              notificationsPopup.classList.contains("show") &&
              !notificationsPopup.contains(e.target) &&
              e.target !== notificationBell
            ) {
              notificationsPopup.classList.remove("show");
            }
          });

          // Mark all as read button
          const markAllRead = document.querySelector(".mark-all-read");
          if (markAllRead) {
            markAllRead.addEventListener("click", function () {
              const unreadItems = document.querySelectorAll(
                ".notification-item.unread"
              );
              unreadItems.forEach((item) => {
                item.classList.remove("unread");
              });

              // Update notification count
              const notificationCount = document.querySelector(
                ".notification-count"
              );
              if (notificationCount) {
                notificationCount.textContent = "0";
                notificationCount.style.display = "none";
              }
            });
          }
        }

        // Date filter functionality
        const dateFilter = document.getElementById("dateFilter");
        if (dateFilter) {
          dateFilter.addEventListener("change", function () {
            // Here you would typically fetch and update data based on selected date range
            console.log("Date filter changed to:", dateFilter.value);
            // For demonstration, we could update the summary numbers
            const randomChange = () => Math.floor(Math.random() * 20) - 5;
            const summaryCountElements =
              document.querySelectorAll(".summary-count");

            summaryCountElements.forEach((element) => {
              const currentValue = parseInt(element.textContent);
              const newValue = Math.max(0, currentValue + randomChange());
              element.textContent = newValue;

              const statusElement =
                element.nextElementSibling.querySelector("span");
              const icon = statusElement.querySelector("i");
              const percentChange = Math.floor(Math.random() * 20) - 5;

              statusElement.textContent = "";
              statusElement.appendChild(icon);
              statusElement.innerHTML += ` ${Math.abs(percentChange)}%`;

              if (percentChange >= 0) {
                statusElement.classList.remove("down");
                statusElement.classList.add("up");
                icon.className = "fas fa-arrow-up";
              } else {
                statusElement.classList.remove("up");
                statusElement.classList.add("down");
                icon.className = "fas fa-arrow-down";
              }
            });
          });
        }

        // Add hover effect to cards
        const cards = document.querySelectorAll(".card");
        cards.forEach((card) => {
          card.addEventListener("mouseenter", function () {
            this.style.boxShadow = "0 0.5rem 2rem 0 rgba(58, 59, 69, 0.2)";
          });

          card.addEventListener("mouseleave", function () {
            this.style.boxShadow = "0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.1)";
          });
        });

        // Appointment actions
        const appointmentButtons = document.querySelectorAll(".btn-action");
        appointmentButtons.forEach((button) => {
          button.addEventListener("click", function (e) {
            e.preventDefault();
            const appointmentItem = this.closest(".appointment-item");

            if (this.classList.contains("btn-accept")) {
              // Start video call or accept appointment logic
              console.log("Video call started");
              // For demo, add a "started" indicator
              const indicator = document.createElement("span");
              indicator.className = "tag";
              indicator.style.backgroundColor = "var(--success-light)";
              indicator.style.color = "var(--success)";
              indicator.textContent = "Started";

              const appointmentType =
                appointmentItem.querySelector(".appointment-type");
              appointmentType.appendChild(indicator);

              this.disabled = true;
              this.style.opacity = "0.5";
            } else if (this.classList.contains("btn-cancel")) {
              // Cancel appointment logic
              console.log("Appointment cancelled");
              // For demo, fade out the appointment
              appointmentItem.style.opacity = "0.5";
              const buttons = appointmentItem.querySelectorAll(".btn-action");
              buttons.forEach((btn) => {
                btn.disabled = true;
              });
            }
          });
        });
      });
    </script>
  </body>
</html>
