<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Assistant - Patient Portal</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Additional styles specific to the assistant page */
        .chat-container {
            height: 500px;
            background-color: #f8f9fa;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            margin-top: 20px;
        }

        .chat-header {
            background-color: #1d7792cc;
            color: white;
            padding: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .assistant-avatar {
            background-color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #5c9bafcc;
            font-size: 20px;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .message {
            max-width: 75%;
            padding: 10px 15px;
            border-radius: 15px;
            position: relative;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .user-message {
            align-self: flex-end;
            background-color: #5c9bafcc;
            color: white;
            border-bottom-right-radius: 5px;
        }

        .assistant-message {
            align-self: flex-start;
            background-color: #e9ecef;
            color: #212529;
            border-bottom-left-radius: 5px;
        }

        .timestamp {
            font-size: 0.7rem;
            opacity: 0.7;
            margin-top: 5px;
            text-align: right;
        }

        .chat-input-container {
            display: flex;
            padding: 15px;
            border-top: 1px solid #dee2e6;
            background-color: white;
        }

        .chat-input {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid #ced4da;
            border-radius: 25px;
            outline: none;
            font-size: 1rem;
        }

        .chat-input:focus {
            border-color: #4e73df;
            box-shadow: 0 0 0 2px rgba(78, 115, 223, 0.25);
        }

        .send-button {
            background-color: #1aaedbcc;
            color: white;
            border: none;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            margin-left: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.2s;
        }

        .send-button:hover {
            background-color: #3a5bc7;
        }

        .assistant-features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .feature-card {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s;
        }

        .feature-card:hover {
            transform: translateY(-5px);
        }

        .feature-icon {
            font-size: 2rem;
            color: #0bb8eccc;
            margin-bottom: 15px;
        }

        .question-suggestions {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 20px;
        }

        .question-chip {
            background-color: #e7f1ff;
            color: #4e73df;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .question-chip:hover {
            background-color: #d0e3ff;
        }

        .typing-indicator {
            display: flex;
            align-items: center;
            gap: 5px;
            padding: 10px 15px;
            background-color: #e9ecef;
            border-radius: 15px;
            align-self: flex-start;
            margin-top: 5px;
            width: fit-content;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background-color: #6c757d;
            border-radius: 50%;
            animation: typingAnimation 1s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) { animation-delay: 0s; }
        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typingAnimation {
            0%, 100% { opacity: 0.4; transform: translateY(0); }
            50% { opacity: 1; transform: translateY(-5px); }
        }
    </style>
</head>
<body>
    <!-- Background Elements -->
    <div class="background-container">
        <div class="shape shape1"></div>
        <div class="shape shape2"></div>
        <div class="icons-container">
            <i class="icon fas fa-heartbeat"></i>
            <i class="icon fas fa-pills"></i>
            <i class="icon fas fa-stethoscope"></i>
            <i class="icon fas fa-user-md"></i>
            <i class="icon fas fa-hospital"></i>
            <i class="icon fas fa-notes-medical"></i>
            <i class="icon fas fa-syringe"></i>
            <i class="icon fas fa-ambulance"></i>
        </div>
    </div>

    <!-- Menu Toggle for Mobile -->
    <div class="menu-toggle" id="menuToggle">
        <i class="fas fa-bars"></i>
    </div>

    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <h2><i class="fas fa-hospital-user"></i> Patient Portal</h2>
        <ul>
            <li><a href="index.html"><i class="fas fa-user"></i> My Profile</a></li>
            <li><a href="baseline.html"><i class="fas fa-chart-line"></i> Baseline Details</a></li>
            <li><a href="reports.html"><i class="fas fa-file-upload"></i> Reports Upload</a></li>
            <li><a href="navigator.html"><i class="fas fa-compass"></i> Patient Navigator</a></li>
            <li><a href="caregiver.html"><i class="fas fa-hands-helping"></i> Caregiver</a></li>
            <li><a href="appointments.html"><i class="fas fa-calendar-check"></i> My Appointments</a></li>
            <li class="active"><a href="assistant.html"><i class="fas fa-robot"></i> AI Assistant</a></li>
            <li><a href="notifications.html"><i class="fas fa-bell"></i> Notifications</a></li>
            <li><a href="resources.html"><i class="fas fa-book-medical"></i> Resources</a></li>
        </ul>
        <div class="logout">
            <li><a href="logout.html"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <div class="header">
            <h1>AI Health Assistant</h1>
            <div class="user-profile">
                <img src="./Profile.jpeg" alt="User Profile" class="profile-image">
                <div class="notification-bell">
                    <i class="fas fa-bell"></i>
                    <span class="notification-count">3</span>
                </div>
            </div>
        </div>

        <!-- AI Assistant Section -->
        <div class="dashboard-section active">
            <div class="section-header">
                <h2>Your Personal Health Assistant</h2>
                <p>Ask questions about your health, medications, or general medical information</p>
            </div>
            
            <div class="question-suggestions">
                <div class="question-chip">What are the side effects of Lisinopril?</div>
                <div class="question-chip">How can I reduce my cholesterol?</div>
                <div class="question-chip">When should I take my medications?</div>
                <div class="question-chip">What should I do before my next appointment?</div>
                <div class="question-chip">How can I access my test results?</div>
            </div>

            <div class="chat-container">
                <div class="chat-header">
                    <div class="assistant-avatar">
                        <i class="fas fa-robot"></i>
                    </div>
                    <div>
                        <h3>HealthBot</h3>
                        <small>Online â€¢ Always here to help</small>
                    </div>
                </div>
                <div class="chat-messages" id="chatMessages">
                    <div class="message assistant-message">
                        Hello John! I'm your AI health assistant. How can I help you today with your health questions?
                        <div class="timestamp">10:30 AM</div>
                    </div>
                    <!-- Messages will be added here by JavaScript -->
                </div>
                <div class="chat-input-container">
                    <input type="text" class="chat-input" id="messageInput" placeholder="Type your health question here..." aria-label="Message">
                    <button class="send-button" id="sendButton" aria-label="Send message">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>

            <div class="assistant-features">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-pills"></i>
                    </div>
                    <h3>Medication Assistant</h3>
                    <p>Get information about your medications, potential interactions, and reminders for when to take them.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-heartbeat"></i>
                    </div>
                    <h3>Health Monitoring</h3>
                    <p>Track your vital signs, symptoms, and get personalized health insights based on your medical history.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-book-medical"></i>
                    </div>
                    <h3>Medical Information</h3>
                    <p>Access reliable health information, explanations of medical terms, and answers to common health questions.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-calendar-check"></i>
                    </div>
                    <h3>Appointment Preparation</h3>
                    <p>Get guidance on what to prepare before appointments and questions to ask your healthcare provider.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // DOM elements
        const chatMessages = document.getElementById('chatMessages');
        const messageInput = document.getElementById('messageInput');
        const sendButton = document.getElementById('sendButton');
        const questionChips = document.querySelectorAll('.question-chip');
        const menuToggle = document.getElementById('menuToggle');
        const sidebar = document.getElementById('sidebar');

        // Sample responses for demo purposes
        const sampleResponses = {
            'lisinopril': 'Common side effects of Lisinopril may include dizziness, headache, fatigue, and dry cough. If you experience swelling of the face/lips/tongue or difficulty breathing, seek medical attention immediately as these could be signs of a serious allergic reaction.',
            'cholesterol': 'To reduce cholesterol naturally: 1) Eat heart-healthy foods (fruits, vegetables, whole grains) 2) Exercise regularly 3) Quit smoking 4) Limit alcohol 5) Maintain a healthy weight. Continue taking your prescribed Atorvastatin as directed by Dr. Johnson.',
            'medications': 'Based on your profile, you should take Lisinopril (10mg) once daily in the morning and Atorvastatin (20mg) in the evening. It\'s best to establish a routine and take these medications at the same time each day.',
            'appointment': 'Before your next appointment with Dr. Johnson, prepare a list of any symptoms or concerns, bring your medication list, write down any questions you have, and bring a record of your blood pressure readings if you\'ve been monitoring at home.',
            'results': 'You can access your test results by going to the "Reports Upload" section in the patient portal. Your most recent lab results should be available there. If you have any questions about interpreting the results, you can message Dr. Johnson directly.'
        };

        // Add mobile sidebar toggle functionality
        menuToggle.addEventListener('click', () => {
            sidebar.classList.toggle('active');
        });

        // Function to add a message to the chat
        function addMessage(text, isUser = false) {
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('message');
            messageDiv.classList.add(isUser ? 'user-message' : 'assistant-message');
            
            // Get current time
            const now = new Date();
            const timeString = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            
            messageDiv.innerHTML = `
                ${text}
                <div class="timestamp">${timeString}</div>
            `;
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Function to show typing indicator
        function showTypingIndicator() {
            const typingDiv = document.createElement('div');
            typingDiv.classList.add('typing-indicator');
            typingDiv.id = 'typingIndicator';
            typingDiv.innerHTML = `
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
            `;
            chatMessages.appendChild(typingDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Function to remove typing indicator
        function removeTypingIndicator() {
            const indicator = document.getElementById('typingIndicator');
            if (indicator) indicator.remove();
        }

        // Function to handle AI response with delay
        function getAIResponse(userMessage) {
            showTypingIndicator();
            
            // Simple keyword matching for demo
            let response = "I'm not sure I understand. Could you rephrase your question about your health or medications?";
            
            userMessage = userMessage.toLowerCase();
            
            if (userMessage.includes('lisinopril') || userMessage.includes('side effect')) {
                response = sampleResponses.lisinopril;
            } else if (userMessage.includes('cholesterol') || userMessage.includes('reduce')) {
                response = sampleResponses.cholesterol;
            } else if (userMessage.includes('when') && userMessage.includes('medication')) {
                response = sampleResponses.medications;
            } else if (userMessage.includes('appointment') || userMessage.includes('next visit')) {
                response = sampleResponses.appointment;
            } else if (userMessage.includes('test') || userMessage.includes('result')) {
                response = sampleResponses.results;
            } else if (userMessage.includes('hello') || userMessage.includes('hi')) {
                response = "Hello John! How are you feeling today? Is there anything specific about your health you'd like to discuss?";
            }
            
            // Simulate AI thinking time
            setTimeout(() => {
                removeTypingIndicator();
                addMessage(response);
            }, 1500);
        }

        // Send button click event
        sendButton.addEventListener('click', () => {
            const message = messageInput.value.trim();
            if (message) {
                addMessage(message, true);
                messageInput.value = '';
                getAIResponse(message);
            }
        });

        // Enter key press event
        messageInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                const message = messageInput.value.trim();
                if (message) {
                    addMessage(message, true);
                    messageInput.value = '';
                    getAIResponse(message);
                }
            }
        });

        // Question chips click event
        questionChips.forEach(chip => {
            chip.addEventListener('click', () => {
                const question = chip.textContent;
                addMessage(question, true);
                getAIResponse(question);
            });
        });
    </script>
</body>
</html>